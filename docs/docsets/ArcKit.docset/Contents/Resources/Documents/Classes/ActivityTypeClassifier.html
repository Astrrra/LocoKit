<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ActivityTypeClassifier Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Class/ActivityTypeClassifier" class="dashAnchor"></a>
    <a title="ActivityTypeClassifier Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">ArcKit Docs</a> (67% documented)</p>
        <p class="header-right"><a href="https://github.com/sobri909/ArcKit"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">ArcKit Reference</a>
        <img id="carat" src="../img/carat.png" />
        ActivityTypeClassifier Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/ActivityTypeClassifier.html">ActivityTypeClassifier</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/LocomotionManager.html">LocomotionManager</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/LocomotionSample.html">LocomotionSample</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/ActivityTypeName.html">ActivityTypeName</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/CoreMotionActivityTypeName.html">CoreMotionActivityTypeName</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/MovingState.html">MovingState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/ClassifierResultItem.html">ClassifierResultItem</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/ClassifierResults.html">ClassifierResults</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>ActivityTypeClassifier</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">ActivityTypeClassifier</span><span class="o">&lt;</span><span class="kt">C</span><span class="p">:</span> <span class="kt">MLModelSource</span><span class="o">&gt;</span><span class="p">:</span> <span class="kt">NSObject</span></code></pre>

                </div>
              </div>
            <p>Activity Type Classifiers are Machine Learning Classifiers. Use an Activity Type Classifier to determine the
<code><a href="../Enums/ActivityTypeName.html">ActivityTypeName</a></code> of a <code><a href="../Classes/LocomotionSample.html">LocomotionSample</a></code>.</p>
<h2 id='supported-activity-types' class='heading'>Supported Activity Types</h2>
<h4 id='base-types' class='heading'>Base Types</h4>
<pre class="highlight plaintext"><code>stationary, transport, walking, running, cycling
</code></pre>

<p>Base types match one-to-one with <a href="https://developer.apple.com/documentation/coremotion/cmmotionactivity">Core Motion activity types</a>,
with the exception of Core Motion&rsquo;s <q>automotive</q> being renamed to <q>transport</q> in ArcKit.</p>
<h4 id='extended-types' class='heading'>Extended Types</h4>
<pre class="highlight plaintext"><code>car, train, bus, motorcycle, airplane, boat
</code></pre>

<p>Extended types are a subset of the base <q>transport</q> type, allowing for more specific classification when enough
local data is available.</p>
<h2 id='region-specific-classifiers' class='heading'>Region Specific Classifiers</h2>

<p>ArcKit provides geographical region specific machine learning data, with each classifier containing the data for a
single region.</p>

<p>This allows for detecting activity types based on region specific characteristics, with much higher accuracy than
iOS&rsquo;s built in Core Motion types detection. It also makes it possible to detect a greater number of activity types,
for example distinguishing between travel by car or train.</p>

<p>ArcKit&rsquo;s data regions are roughly 100 kilometres by 100 kilometres squared (0.1 by 0.1 degrees), or about the size of
a small town, or a single neighbourhood in a larger city.</p>

<p>Larger cities might encompass anywhere from four to ten or more classifier regions, thus allowing the classifers to
accurately detect activity type differences within different areas of a single city.</p>
<h2 id='determining-regional-coverage' class='heading'>Determining Regional Coverage</h2>

<ul>
<li><a href="https://arc-web.herokuapp.com/coverage/transport">ArcKit transport coverage maps</a></li>
<li><a href="https://arc-web.herokuapp.com/coverage/cycling">ArcKit cycling coverage maps</a></li>
</ul>
<h4 id='stationary-transport-walking-running' class='heading'>Stationary, Transport, Walking, Running</h4>

<p>The base activity types of stationary, transport, walking, and running do not significantly differ by geographical
region, thus should achieve high detection accuracy everywhere in the world, regardless of local data availability.</p>

<p>These types can be considered to have global coverage.</p>
<h4 id='cycling' class='heading'>Cycling</h4>

<p>Cycling has enough regional variance in locomotive characteristics that detection accuracy can range from excellent
to average depending on the availability of local model data.</p>

<p>If very high accuracy cycling detection is important to your application, you should check the cycling coverage map
for the regions you require. However if cycling detection is not a core function of your app, then the results from
even low coverage classifiers should achieve adequate accuracy, and will certainly exceed the accuracy of Core
Motion&rsquo;s detection.</p>
<h4 id='car-train-bus-motorcycle-airplane-boat' class='heading'>Car, Train, Bus, Motorcycle, Airplane, Boat</h4>

<p>While the base <q>transport</q> type can be detected anywhere in the world with high accuracy, determining the specific
mode of transport requires local knowledge. If knowing the specific mode of transport is important to your
application, you should check the coverage maps for your required regions.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Creating%20a%20Classifier"></a>
                <a name="//apple_ref/swift/Section/Creating a Classifier" class="dashAnchor"></a>
                <a href="#/Creating%20a%20Classifier">
                  <h3 class="section-name">Creating a Classifier</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierCACyxGSgSayAA0cD4NameOG14requestedTypes_SC22CLLocationCoordinate2DV10coordinatetcfc"></a>
                    <a name="//apple_ref/swift/Method/init(requestedTypes:coordinate:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierCACyxGSgSayAA0cD4NameOG14requestedTypes_SC22CLLocationCoordinate2DV10coordinatetcfc">init(requestedTypes:coordinate:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Use this init method to create a new classifier.</p>

<p>The classifier will be created from locally cached model data. If no appropriate model data is found in cache,
a fetch request will be made to the server, and the init will immediately return nil. Assuming an internet
connection is available, a second attempt to create the classifier, a second later, should return a valid
classifier.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    Classifiers should be retained and reused. Classifier creation requires potentially expensive cache
lookups and remote model data fetches. As such, creating new classifiers should only be done on an as needed
basis, and existing classifiers should be reused while still valid.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="n">convenience</span> <span class="nf">init</span><span class="p">?(</span><span class="nv">requestedTypes</span><span class="p">:</span> <span class="p">[</span><span class="kt"><a href="../Enums/ActivityTypeName.html">ActivityTypeName</a></span><span class="p">]</span> <span class="o">=</span> <span class="kt"><a href="../Enums/ActivityTypeName.html">ActivityTypeName</a></span><span class="o">.</span><span class="n">baseTypes</span><span class="p">,</span>
                             <span class="nv">coordinate</span><span class="p">:</span> <span class="kt">CLLocationCoordinate2D</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Classifying%20Samples"></a>
                <a name="//apple_ref/swift/Section/Classifying Samples" class="dashAnchor"></a>
                <a href="#/Classifying%20Samples">
                  <h3 class="section-name">Classifying Samples</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC8classifyAA0E7ResultsVAA0cD12Classifiable_p_SayAA0cD4NameOGSg5typestF"></a>
                    <a name="//apple_ref/swift/Method/classify(_:types:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC8classifyAA0E7ResultsVAA0cD12Classifiable_p_SayAA0cD4NameOGSg5typestF">classify(_:types:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Classify a <code><a href="../Classes/LocomotionSample.html">LocomotionSample</a></code> to determine its most likely <code><a href="../Enums/ActivityTypeName.html">ActivityTypeName</a></code>.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>This method is the main purpose of classifiers, and is optimised with the expectation that it will called
repeatedly during an app session. Although there is unavoidably some energy cost to classifying samples,
so the frequency of classifications should be considered carefully, especially in long running apps.</p>

<p>For example, the ArcKit Demo App calls a classifier every time a new location is received, thus up to about
once every second. On the other hand, <a href="https://itunes.apple.com/us/app/arc-app-location-activity-tracker/id1063151918?mt=8">Arc App</a>
classifies samples only once every six seconds at most, due to the expectation that the app will be recording
and classifying potentially hours of data each day.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">classify</span><span class="p">(</span><span class="n">_</span> <span class="nv">classifiable</span><span class="p">:</span> <span class="kt">ActivityTypeClassifiable</span><span class="p">,</span> <span class="nv">types</span><span class="p">:</span> <span class="p">[</span><span class="kt"><a href="../Enums/ActivityTypeName.html">ActivityTypeName</a></span><span class="p">]?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/ClassifierResults.html">ClassifierResults</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Classifier%20Validity"></a>
                <a name="//apple_ref/swift/Section/Classifier Validity" class="dashAnchor"></a>
                <a href="#/Classifier%20Validity">
                  <h3 class="section-name">Classifier Validity</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC8containsSbSC22CLLocationCoordinate2DV10coordinate_tF"></a>
                    <a name="//apple_ref/swift/Method/contains(coordinate:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC8containsSbSC22CLLocationCoordinate2DV10coordinate_tF">contains(coordinate:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Determine whether the given coordinate is inside the classifier&rsquo;s geographical region.</p>

<p>This method works well in combination with <code><a href="../Classes/ActivityTypeClassifier.html#/s:6ArcKit22ActivityTypeClassifierC7isStaleSbv">isStale</a></code> as a test for whether a classifier should be used to classify
a sample, or whether a fresh classifier should instead be requested.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    <p>Ideally classifiers should only be used to classify samples that fall inside the classifier&rsquo;s region.
However if relevant model data is in the local cache and no internet connection is available, thus a fresh
classifier cannot be fetched, a stale and/or geographically inappropriate classifier may continue to be used,
albeit with potentially reduced accuracy.</p>

<p>Extended transport activity types (car, train, etc) will have especially inaccurate results when classified
by a geographically inappropriate classifier. However base types (walking, running, etc) should receive
adequately accurate results in any classifier, regardless of geographical appropriateness.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">contains</span><span class="p">(</span><span class="nv">coordinate</span><span class="p">:</span> <span class="kt">CLLocationCoordinate2D</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC7isStaleSbv"></a>
                    <a name="//apple_ref/swift/Property/isStale" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC7isStaleSbv">isStale</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Whether the classifier&rsquo;s model data is old enough to justify requesting a new classifier with fresh model data.</p>

<p>This bool works well in combination with <code><a href="../Classes/ActivityTypeClassifier.html#/s:6ArcKit22ActivityTypeClassifierC8containsSbSC22CLLocationCoordinate2DV10coordinate_tF">contains(coordinate:)</a></code> as a test for whether a classifier should be
used to classify a sample, or whether a fresh classifier should instead be used.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">isStale</span><span class="p">:</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Data%20Coverage%20and%20Accuracy"></a>
                <a name="//apple_ref/swift/Section/Data Coverage and Accuracy" class="dashAnchor"></a>
                <a href="#/Data%20Coverage%20and%20Accuracy">
                  <h3 class="section-name">Data Coverage and Accuracy</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC13coverageScoreSdv"></a>
                    <a name="//apple_ref/swift/Property/coverageScore" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC13coverageScoreSdv">coverageScore</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Coverage Score is the result of <code>completenessScore * accuracyScore</code>, in the range of 0.0 to 1.0.</p>

<p>This value is best used to get a general sense of the expected quality and usability of the classifier&rsquo;s results.</p>

<p>In practice, any score above 0.15 indicates a usable classifier in terms of local model data, however you should
experiment with a range of thresholds to determine a best fit minimum for your app&rsquo;s accuracy requirements.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">coverageScore</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC13accuracyScoreSdSgv"></a>
                    <a name="//apple_ref/swift/Property/accuracyScore" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC13accuracyScoreSdSgv">accuracyScore</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Accuracy Score is the expected minimum accuracy of the clasifier&rsquo;s results, in the range of 0.0 to 1.0.</p>

<p>This value should not be used directly. Instead you should use <code>coverageStore</code> to determine the usability of a
classifier.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    This number represents the worst case accuracy. The achieved accuracy will typically be considerably
higher than this value. A classifier with an Accuracy Score above 0.75 will appear to give essentially
perfect results in most cases.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">accuracyScore</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span> <span class="o">=</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6ArcKit22ActivityTypeClassifierC17completenessScoreSdv"></a>
                    <a name="//apple_ref/swift/Property/completenessScore" class="dashAnchor"></a>
                    <a class="token" href="#/s:6ArcKit22ActivityTypeClassifierC17completenessScoreSdv">completenessScore</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Completeness Score is an internal, machine learning specific measure of the number of training samples used to
compose the model versus a threshold sample count.</p>

<p>This value should not be used directly. Instead you should use <code>coverageStore</code> to determine the usability of a
classifier.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">lazy</span> <span class="k">var</span> <span class="nv">completenessScore</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="https://github.com/sobri909/ArcKit" target="_blank" rel="external">Matt Greenfield</a>. All rights reserved. (Last updated: 2017-10-13)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.4</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
